<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta name="google-site-verification" content="Sbao2yVur4CMYEsgpErDP5S6uuqaNxw3VOmmtylKbeA" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map and Filter Rlist (Object Version)</title>
    <meta name="author" content="Mark Miyashita" />
    <link href="http://feeds.feedburner.com/markmiyashita" rel="alternate" title="Mark Miyashita" type="application/atom+xml" />

    <script type="text/javascript" src="/public/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/public/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" src="/public/js/prettify.js"></script>
    <script type="text/javascript" src="/public/js/home.js"></script>

    <link rel="stylesheet" href="/public/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/prettify.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/projects.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/resume.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/base.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/layouts.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/home.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/header.css" type="text/css" />
  </head>

  <body>
    <header id="header">
      <a href="/"><img class="profile_pic" src="/public/images/mark_miyashita_small.png"></img></a>

<h1>
  <a href="/">Mark Miyashita</a>
</h1>

<h2>
  <a href="/">negativetwelve</a>
</h2>

<h3>
  <p class="about_links">
    <a href="/resume/#education">Student</a>, <a href="/resume/#work">Software Engineer</a>, <a href="/cs61a">Teacher</a>, <a href="/blog">Aspiring Entrepreneur</a>
  </p>
</h3>

<div id="links">
  <span><a href="/">About</a></span>
  <span><a href="/projects">Projects</a></span>
  <span><a href="/resume">Resume</a></span>
  <span><a href="/blog">Blog</a></span>
  <span><a href="/cs61a/su13">CS61A</a></span>
  <span><a href="/interviews">Interviews</a></span>
  <span><a href="/hkn">HKN</a></span>
  <span><a href="/web_dev">Web Development</a></span>
  <span><a href="/contact">Contact</a></span>
</div>

    </header>

    <section id="main_content">

      <link rel="stylesheet" href="/public/css/cs61a.css" type="text/css" />

<header id="top_bar">
  Mar 19, 2013
</header>

<article class="post">
  <a href="/cs61a/sp13" class="button_link">Go Back</a>
  
  <h4>Warmup Problem</h4>
  <h2>Map and Filter Rlist (Object Version)</h2>
  
  
<p>We’ve already seen how to implement <code>map</code> and <code>filter</code> using our tuple/functional abstraction for rlists, now let’s implement the same functions using the class version. You should be able to write these from scratch but here are the previous implementations of <a href="http://markmiyashita.com/cs61a/sp13/problems/map_rlist/">map</a> and <a href="http://markmiyashita.com/cs61a/sp13/problems/filter_rlist/">filter</a>. Here is the class Rlist that we will be using as our abstraction.</p>

<pre><code>class Rlist(object):
    """A recursive list consisting of a first element and the rest.

    &gt;&gt;&gt; s = Rlist(1, Rlist(2, Rlist(3)))
    &gt;&gt;&gt; len(s)
    3
    &gt;&gt;&gt; s[0]
    1
    &gt;&gt;&gt; s[1]
    2
    &gt;&gt;&gt; s[2]
    3
    """
    class EmptyList(object):
        def __len__(self):
            return 0
    empty = EmptyList()

    def __init__(self, first, rest=empty):
        self.first = first
        self.rest = rest

    def __repr__(self):
        f = repr(self.first)
        if self.rest is Rlist.empty:
            return 'Rlist({0})'.format(f)
        else:
            return 'Rlist({0}, {1})'.format(f, repr(self.rest))

    def __len__(self):
        return 1 + len(self.rest)

    def __getitem__(self, i):
        if i == 0:
            return self.first
        return self.rest[i - 1]
</code></pre>

<p>Let’s write our functions <code>map</code> and <code>filter</code> that work for the Rlist class. Here are some blank functions to fill in:</p>

<pre><code>def map_rlist(fn, s):
    """ Return an Rlist resulting from mapping fn over the elements of s.

    &gt;&gt;&gt; s = Rlist(1, Rlist(2, Rlist(3)))
    &gt;&gt;&gt; map_rlist(lambda x: x * x, s)
    Rlist(1, Rlist(4, Rlist(9)))
    """
    "***YOUR CODE HERE***"

def filter_rlist(fn, s):
    """ Return an Rlist that removes all of the elements that do not satisfy
    the input function.

    &gt;&gt;&gt; s = Rlist(1, Rlist(2, Rlist(3)))
    &gt;&gt;&gt; filter_rlist(lambda x: x%2==0, s)
    Rlist(2)
    """
    "***YOUR CODE HERE***"
</code></pre>

<p><a href="#solution" class="solution_toggle">Toggle Solution</a></p>

<div class="solution">

  <pre><code>def map_rlist(fn, s):
    """ Return an Rlist resulting from mapping fn over the elements of s.

    &gt;&gt;&gt; s = Rlist(1, Rlist(2, Rlist(3)))
    &gt;&gt;&gt; map_rlist(lambda x: x * x, s)
    Rlist(1, Rlist(4, Rlist(9)))
    """
    if s is Rlist.empty:
        return s
    return Rlist(fn(s.first), map_rlist(fn, s.rest))

def filter_rlist(fn, s):
    """ Return an Rlist that removes all of the elements that do not satisfy
    the input function. 

    &gt;&gt;&gt; s = Rlist(1, Rlist(2, Rlist(3)))
    &gt;&gt;&gt; filter_rlist(lambda x: x%2==0, s)
    Rlist(2)
    """
    if s is Rlist.empty:
        return s
    if fn(s.first):
        return Rlist(s.first, filter_rlist(fn, s.rest))
    return filter_rlist(fn, s.rest)
</code></pre>

  <p>Our implementations for the functions remain the same as before when we had a different abstraction. The only thing that has changed is the fact that we now call our first and rest in different ways. Previously, we used <code>first(r)</code>, now we call <code>r.first</code>.</p>

  <p>For map, we still want to return the empty rlist when the input is the empty rlist. Then, we want to apply the function to the first item of our rlist and recursively call map on the rest of our rlist.</p>

  <p>For filter, we want to check if the first item satisfies our input function. If it does satisfy the function, then we can keep that item and recursively call filter on the rest of our rlist. If it does not, then we can ignore the first item entirely and recursively call filter on the rest of the rlist.</p>

</div>


  
</article>

<article class="post">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'markmiyashita'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</article>


      <section class="footer">
  <p class="copyright">
    © 2012 Mark Miyashita - <a href="http://github.com/negativetwelve">Github</a> - <a href="http://www.linkedin.com/pub/mark-miyashita/38/63/49/">LinkedIn</a> - <a href="https://plus.google.com/101180624276428786239?rel=author">Google+</a>
  </p>
</section>
    </section>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-29669299-1");
    pageTracker._trackPageview();
    </script>
    <!-- Google Analytics end -->

    <script type="text/javascript">
      prettyPrint();
      var date = document.getElementsByClassName("current_date")[0];
      if (date) {
        date.innerHTML = $.datepicker.formatDate('MM dd, yy', new Date());
      }

      $(document).keypress(function(e) {
        base = document.location.origin;
        switch (e.charCode) {
          case 97: // 'a' for about
            document.location.href = base;
            break;
          case 98: // 'b' for blog
            document.location.href = base + '/blog';
            break;
          case 104: // 'h' for hkn
            document.location.href = base + "/hkn";
            break;
          case 112: // 'p' for projects
            document.location.href = base + '/projects';
            break;
          case 114: // 'r' for resume
            document.location.href = base + '/resume';
            break;
          case 119: // 'w' for web development
            document.location.href = base + '/web_dev';
            break;
          case 99: // 'c' for cs61a
            window.location.href = base + "/cs61a/sp13";
            break;
        }
      });
    </script>
  </body>

</html>
