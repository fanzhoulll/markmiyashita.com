<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta name="google-site-verification" content="Sbao2yVur4CMYEsgpErDP5S6uuqaNxw3VOmmtylKbeA" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better Fib</title>
    <meta name="author" content="Mark Miyashita" />
    <link href="http://feeds.feedburner.com/markmiyashita" rel="alternate" title="Mark Miyashita" type="application/atom+xml" />

    <script type="text/javascript" src="/public/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/public/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" src="/public/js/prettify.js"></script>
    <script type="text/javascript" src="/public/js/home.js"></script>

    <link rel="stylesheet" href="/public/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/prettify.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/projects.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/resume.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/base.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/layouts.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/home.css" type="text/css" />
    <link rel="stylesheet" href="/public/css/header.css" type="text/css" />
  </head>

  <body>
    <header id="header">
      <a href="/"><img class="profile_pic" src="/public/images/mark_miyashita_small.png"></img></a>

<h1>
  <a href="/">Mark Miyashita</a>
</h1>

<h2>
  <a href="/">negativetwelve</a>
</h2>

<h3>
  <p class="about_links">
    <a href="/resume/#education">Student</a>, <a href="/resume/#work">Software Engineer</a>, <a href="/cs61a">Teacher</a>, <a href="/blog">Aspiring Entrepreneur</a>
  </p>
</h3>

<div id="links">
  <span><a href="/">About</a></span>
  <span><a href="/projects">Projects</a></span>
  <span><a href="/resume">Resume</a></span>
  <span><a href="/blog">Blog</a></span>
  <span><a href="/cs61a/su13">CS61A</a></span>
  <span><a href="/interviews">Interviews</a></span>
  <span><a href="/hkn">HKN</a></span>
  <span><a href="/web_dev">Web Development</a></span>
  <span><a href="/contact">Contact</a></span>
</div>

    </header>

    <section id="main_content">

      <link rel="stylesheet" href="/public/css/cs61a.css" type="text/css" />

<header id="top_bar">
  Mar 04, 2013
</header>

<article class="post">
  <a href="/cs61a/sp13" class="button_link">Go Back</a>
  
  <h4>Warmup Problem</h4>
  <h2>Better Fib</h2>
  
  
<p>Remember <code>fib</code>, the function that we created a while ago to find the nth fibonacci number and to show tree recursion? The function was really slow on large inputs because at each level of recursion, it would make two recursive calls to itself AND it would recompute numbers that it already knew. For example, calling <code>fib(3)</code> computes <code>fib(2)</code> once and <code>fib(1)</code> twice. We don’t need to compute out <code>fib(1)</code> twice. Using a dictionary, your job is to re-write the function <code>fib</code> so that it only computes a certain recursive call once. (i.e. it only computes <code>fib(1)</code> once) Remember that a dictionary is able to store and look up items using a key-value system. If you want a hint, the idea that we are implementing is called <em>memoization</em>.</p>

<pre><code>def better_fib(n):
    """
    Takes in a number, n, and computes the nth fibonacci
    number recursively. To save time, it will only compute
    each value once and store it in a dictionary. We will
    define better_fib(0) = 0 and better_fib(1) = 1.
      
    &gt;&gt;&gt; better_fib(3)
    2
    &gt;&gt;&gt; better_fib(100)
    354224848179261915075   # this should take less than a second
    """
    "***YOUR CODE HERE***"
</code></pre>

<p><a href="#solution" class="solution_toggle">Toggle Solution</a></p>

<div class="solution">

  <pre><code>def better_fib(n):
    """
    Takes in a number, n, and computes the nth fibonacci
    number recursively. To save time, it will only compute
    each value once and store it in a dictionary. We will
    define better_fib(0) = 0 and better_fib(1) = 1.
      
    &gt;&gt;&gt; better_fib(3)
    2
    &gt;&gt;&gt; better_fib(100)
    354224848179261915075   # this should take less than a second
    """
    d = {}
    def fib_helper(n):
        if n in d:
            return d[n]
        if n &lt;= 1:
            d[n] = n
            return n
        d[n] = fib_help(n - 1) + fib_help(n - 2)
        return d[n]
    return fib_helper(n)
</code></pre>

  <p>There are several main ideas being tested in this problem. First, the overarching idea is <strong>memoization</strong>. We want to be able to quickly compute the nth fibonacci number and to do this, we will memoize, or remember, what the previous values that we computed were. To implement this, we will use a dictionary. Now, we could have passed the dictionary through our helper function, but then we would start having multiple copies of the dictionary floating around our function calls. To avoid that, we will be using the final main idea, a mutable data structure. In this problem, by creating the dictionary outside of the inner function, we only have to create one. That dictionary is is accessible by every single recursive call. That means that if we compute <code>fib(7)</code> in one recursive call, but we need it later when evaluating <code>fib(8)</code>, then we can evaluate it immidiately.</p>

  <p>The function first checks to see if the item is currently in the dictionary. If it is, it returns the value of it immidiately and goes onto the next recursive call. If not, it computes the number, then stores it directly into the dictionary for future access. This saves unnecessary computations that might occur later on.</p>

</div>


  
</article>

<article class="post">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'markmiyashita'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</article>


      <section class="footer">
  <p class="copyright">
    © 2012 Mark Miyashita - <a href="http://github.com/negativetwelve">Github</a> - <a href="http://www.linkedin.com/pub/mark-miyashita/38/63/49/">LinkedIn</a> - <a href="https://plus.google.com/101180624276428786239?rel=author">Google+</a>
  </p>
</section>
    </section>


    <!-- Google Analytics -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-29669299-1");
    pageTracker._trackPageview();
    </script>
    <!-- Google Analytics end -->

    <script type="text/javascript">
      prettyPrint();
      var date = document.getElementsByClassName("current_date")[0];
      if (date) {
        date.innerHTML = $.datepicker.formatDate('MM dd, yy', new Date());
      }

      $(document).keypress(function(e) {
        base = document.location.origin;
        switch (e.charCode) {
          case 97: // 'a' for about
            document.location.href = base;
            break;
          case 98: // 'b' for blog
            document.location.href = base + '/blog';
            break;
          case 104: // 'h' for hkn
            document.location.href = base + "/hkn";
            break;
          case 112: // 'p' for projects
            document.location.href = base + '/projects';
            break;
          case 114: // 'r' for resume
            document.location.href = base + '/resume';
            break;
          case 119: // 'w' for web development
            document.location.href = base + '/web_dev';
            break;
          case 99: // 'c' for cs61a
            window.location.href = base + "/cs61a/sp13";
            break;
        }
      });
    </script>
  </body>

</html>
