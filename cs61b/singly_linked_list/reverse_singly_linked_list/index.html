<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="google-site-verification" content="Sbao2yVur4CMYEsgpErDP5S6uuqaNxw3VOmmtylKbeA" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="I'm Mark, a student at the University of California, Berkeley pursuing a degree in Electrical Engineering and Computer Science. I am currently a Software Engineer at Yelp and a TA for CS61A at UC Berkeley.">
<meta name="author" content="Mark Miyashita">
<link href="http://feeds.feedburner.com/markmiyashita" rel="alternate" title="Mark Miyashita" type="application/atom+xml">

<title>
  
    CS61B - Reverse a Singly Linked List - Mark Miyashita
  
</title>

<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900' rel='stylesheet' type='text/css'>

<link href="/assets/css/bootstrap.css" rel="stylesheet">
<link href="/assets/css/main.css" rel="stylesheet">
<link href="/assets/css/bootstrap-overrides.css" rel="stylesheet">
<link href="/assets/css/solarized_dark.css" rel="stylesheet">

<link href="/assets/css/default.css" rel="stylesheet">
<link href="/assets/css/custom.css" rel="stylesheet">

<script src="/assets/js/jquery-1.8.3.min.js"></script>

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="assets/js/html5shiv.js"></script>
  <script src="assets/js/respond.min.js"></script>
<![endif]-->

<!-- Start of Google Analytics Code -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29669299-1']);
  _gaq.push(['_setDomainName', 'markmiyashita.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End of Google Analytics Code -->

<!-- Start of Woopra Code -->
<script>
(function(){
  var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
})("woopra");

woopra.config({
    domain: 'markmiyashita.com',
    idle_timeout: 600000
});
woopra.track('pv', {
    url: window.location.pathname+window.location.search,
    title: document.title
});
</script>
<!-- End of Woopra Code -->


  </head>
  <body>
    <a class="sr-only" href="#content">Skip navigation</a>

    <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="/">About</a>
        </li>
        <li>
          <a href="/resume">Resume</a>
        </li>
        <li>
          <a href="/projects">Projects</a>
        </li>
        <li>
          <a href="/blog">Blog</a>
        </li>
        <li>
          <a href="/cs61a/sp14">CS61A</a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">More CS Classes <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/cs61b">CS61B - Data Structures</a></li>
            <li><a href="/cs61c">CS61C - Computer Architecture</a></li>
            <li><a href="/cs70">CS70 - Discrete Mathematics</a></li>
          </ul>
        </li>
        <li>
          <a href="/interviews/problems">Interview Practice</a>
        </li>
        <li >
          <a href="/blueprint">Blueprint</a>
        </li>
        <li>
          <a href="/hkn">HKN</a>
        </li>
        <li>
          <a href="/web_dev">Web Development</a>
        </li>
        <li>
          <a href="/contact">Contact</a>
        </li>
      </ul>
    </nav>
  </div>
</header>


    
      <div class="bs-header" id="content">
  <div class="container">
    <img class="profile-pic" src="/assets/images/mark_miyashita.jpg"></img>
    <h1>Mark Miyashita</h1>
    <h4>negativetwelve</h4>
    <p>
      <a href="/resume/#education">Student</a>, <a href="/resume/#work">Software Engineer</a>, <a href="/cs61a">Teacher</a>, <a href="/blog">Aspiring Entrepreneur</a>
    </p>
  </div>
</div>

    

    
      <div class="bs-old-docs">
  <div class="container">
    Looking for more CS classes? Check out:
    
      
        <a href="/cs61a">CS61A</a>
      
      
      -
      
    
      
        <strong><a href="/cs61b">CS61B</a></strong>
      
      
      -
      
    
      
        <a href="/cs61c">CS61C</a>
      
      
      -
      
    
      
        <a href="/cs70">CS70</a>
      
      
    
  </div>
</div>

    

    

    
      <div class="container bs-docs-container">
        <div class="row">
            <div class="col-md-3">
  
  <div class="bs-sidebar hidden-print" role="complementary" data-spy="affix" data-offset-top="335">
  <ul class="nav bs-sidenav">






  






  
  
    <li><a href="/cs61b/practice">All Problems and Notes (8)</a></li>
  

  
    
    
      
      
      
      
        <li><a href="/cs61b/basics">Basics (1)</a></li>
      
    
  
    
    
      
      
      
      
        <li><a href="/cs61b/singly_linked_list">Singly Linked List (7)</a></li>
      
    
  


  </ul>
</div>

</div>
<div class="col-md-9" role="main">
  <div class="page-header">
  <h3>Reverse a Singly Linked List</h3>
</div>






<p>Let’s write a method for the <a href="/cs61b/singly_linked_list/code/singly_linked_list">SinglyLinkedList class</a> that allows us to reverse a <code>SinglyLinkedList</code>. This method should be mutating. Challenge: Try to implement this method recursively.</p>

<p>This method should run in Θ(n) time.</p>

<pre><code>public void reverse() {

}
</code></pre>

<p>Hint: You might want to make a helper function or a method in the <code>SinglyLinkedListNode</code> class.</p>

<p><a href="#solution" class="solution_toggle">Toggle Solution</a></p>

<div class="solution">

  <p>Here’s the solution I came up with:</p>

  <div class="highlight"><pre><code class="java"><span class="cm">/*</span>
<span class="cm"> * This is the reverse method of the SinglyLinkedList class.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">reverse</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">head</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="na">reverse</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/*</span>
<span class="cm"> * This is the reverse method of the SinglyLinkedListNode class.</span>
<span class="cm"> * It returns a pointer to the front of the reversed list so that we</span>
<span class="cm"> * can assign it to the head of the overall list.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="n">SinglyLinkedListNode</span> <span class="nf">reverse</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">SinglyLinkedListNode</span> <span class="n">currentNext</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">SinglyLinkedListNode</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">currentNext</span><span class="o">.</span><span class="na">reverse</span><span class="o">();</span>
    <span class="n">currentNext</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">rest</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

  <p>The <code>reverse</code> method for the <code>SinglyLinkedList</code> class does not return anything while the <code>reverse</code> method of the <code>SinglyLinkedListNode</code> class returns a <code>SinglyLinkedListNode</code>. The reason is because we need to have a pointer to the new front of the list in order to assign that to the <code>head</code> of the list.</p>

  <p>Let’s walk through the implementation. In the <code>SinglyLinkedList</code> class, we check to see if the <code>head</code> is <code>null</code>. If it is, we’re done and can just return. Otherwise, we call the <code>reverse</code> method of the <code>head</code> and assign the return value to our <code>head</code> variable which is a pointer to the front of the list.</p>

  <p>In the <code>SinglyLinkedListNode</code> class, we have a slightly more complicated problem to solve. If our next item is null, then we can simply return ourself. What that means is that if I only have one element in my list, the reverse of that list is just the single item. If that’s not the case, then we have to do some pointer manipulation. First, we need a way to store our <code>next</code> node so we create a temporary variable <code>currentNext</code> that will be our pointer to our <code>next</code> item. Then, we’re going to set our <code>next</code> to null so that we can reassign it later. Don’t worry, we still have a reference to the <code>next</code> item in our variable <code>currentNext</code>.</p>

  <p>After that, we’re going to let recursion finish the rest by calling <code>reverse</code> on the <code>currentNext</code>. The reverse method returns a pointer to the new front of the list. This means that if our previous list was <code>1 -&gt; 2 -&gt; 3</code>, calling <code>reverse</code> on this list would return a pointer to <code>3</code>. <code>currentNext</code> still points to <code>2</code> in this case. In the next line, we’re going to be setting <code>currentNext</code>’s next to be the current item. In the example above, we’re setting <code>2</code>’s next to be <code>1</code>.</p>

  <p>Then, since we stored a pointer to the front of the list in our variable <code>rest</code>, we can just return that so that we can set our <code>head</code> to point to the front.</p>

  <p>The result is a reversed list!</p>

  <p>For testing, I simply made a linked list, called reverse, and then made sure it returned the reverse of the original list:</p>

  <pre><code>public static void main(String[] args) {
  Object[] inOrder = {1, 2 ,3, 4, 5, 6};
  SinglyLinkedList u = new SinglyLinkedList(inOrder);
  System.out.println(u.toString());
  u.reverse();
  System.out.println(u.toString());
}
</code></pre>

  <p>Should output:</p>

  <pre><code>1 2 3 4 5 6
6 5 4 3 2 1
</code></pre>

</div>



<p class="disclaimer">
  I don't claim to be perfect so if you find an error on this page, please <a href="/contact">send me an email</a> preferably with a link to this page so that I know what I need to fix!
</p>

<article class="post">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'markmiyashita'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</article>

</div>
        </div>
      </div>
    

    <footer class="bs-footer" role="contentinfo">
      <p class="copyright">
        © 2014 Mark Miyashita
      </p>

      <ul class="footer-links">
        <li><a href="http://github.com/negativetwelve">Github</a></li>
        <li class="muted">&middot;</li>
        <li><a href="https://hkn.eecs.berkeley.edu/coursesurveys/instructor/7419">TA Ratings</a></li>
        <li class="muted">&middot;</li>
        <li><a href="https://www.facebook.com/markmiyashita12">Facebook</a></li>
        <li class="muted">&middot;</li>
        <li><a href="http://www.linkedin.com/pub/mark-miyashita/38/63/49/">LinkedIn</a></li>
        <li class="muted">&middot;</li>
        <li><a href="https://plus.google.com/101180624276428786239?rel=author">Google+</a></li>
      </ul>
    </footer>

    <script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/highlight.pack.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  $(".solution_toggle").click(function(event) {
    event.preventDefault();
    $(".solution").fadeToggle('medium');
  });
});


hljs.initHighlightingOnLoad();

$(document).keypress(function(e) {
  base = document.location.origin;
  switch (e.charCode) {
    case 97: // 'a' for about
      document.location.href = base;
      break;
    case 98: // 'b' for blog
      document.location.href = base + '/blog';
      break;
    case 104: // 'h' for hkn
      document.location.href = base + "/hkn";
      break;
    case 105: // 'i' for interview practice
      document.location.href = base + "/interviews/problems";
      break;
    case 109: // 'm' for more
      $('#sub-links').slideDown('medium');
      break;
    case 112: // 'p' for projects
      document.location.href = base + '/projects';
      break;
    case 114: // 'r' for resume
      document.location.href = base + '/resume';
      break;
    case 119: // 'w' for web development
      document.location.href = base + '/web_dev';
      break;
    case 99: // 'c' for cs61a
      window.location.href = base + "/cs61a";
      break;
    default:
      console.log(e.charCode);
  }
});
</script>


  </body>
</html>
